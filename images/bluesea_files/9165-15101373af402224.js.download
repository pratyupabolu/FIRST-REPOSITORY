(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9165],{72909:function(l,e,n){"use strict";n.d(e,{j:function(){return v}});var t=n(52322),a=n(7415);n(39515),n(62159),n(79265);var o=(0,n(46724).c)({defaultClassName:"_bglng83 _1286nb12il _1286nb128l _1286nb1239 _1286nb12d9 _1286nb14k3 _1286nb14lf _1286nb14mr _1286nb14o3 _1286nb12r3 _1286nb12nr _1286nb13p9 _1286nb119",variantClassNames:{mode:{follow:"_1286nb16ea _1286nb17os _1286nb17up",following:"_1286nb16ea _1286nb16ly _1286nb17os _1286nb182g"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),r="_bglng86",s=n(27674),c=n(9626),i=n(46805),u=n(2784),f=n(53476),h=n(63727);let w=async()=>{let l=await fetch("/api/social/follow");if(!l.ok)throw Error();return await l.json()},b=(0,f.cn)({key:"userFollowsState",default:[],effects:[l=>{let{setSelf:e}=l;(async()=>{let l=async()=>await w();e(await l())})()}]}),d=(0,f.CG)({key:"authorUserFollow",get:l=>{let{id:e}=l;return l=>{let{get:n}=l;return!!n(h.UA)&&n(b).includes(e)}},set:l=>{let{id:e}=l;return(l,n)=>{let{get:t,set:a}=l,o=t(b);a(b,n?o.filter(l=>l!==e):[...o,e])}}});var _=n(85074);let g=async(l,e)=>{if(!(await fetch("/api/social/follow?id=".concat(e),{method:l?"DELETE":"PUT"})).ok)throw Error("There was a problem toggling the follow")};var m=n(9691);let p=(l,e)=>{let n=(0,m.PN)(),t={event:"ga4event",event_name:"follow_author",action:"follow_author",author_name:l,location:e,category:"follow-contributor"};return()=>n(t)},k=(l,e,n)=>{let[t,a]=(0,u.useState)(!0),{setToast:o}=(0,_.p)(),r=(0,c.dO)(),h=(0,i.aw)(),[w,b]=(0,f.FV)(d({id:l})),m=(0,c.A9)(),k=p(e,n),v=(0,u.useCallback)(()=>{if(!r){m(),window.location.href="".concat(s.YC.href,"?").concat(h);return}a(!1),g(w,l).then(()=>b(w)).then(()=>!w&&k()).catch(()=>o()).finally(()=>a(!0))},[r,w,l,m,h,b,o,k]);return{following:w,disabled:!t,onClick:v}},v=l=>{let{id:e,name:n,location:s}=l,{t:c}=(0,a.$G)("common"),{following:i,onClick:u,disabled:f}=k(e,n,s);return i?(0,t.jsxs)("button",{className:o({mode:"following"}),onClick:u,disabled:f,children:[(0,t.jsx)("span",{className:r,children:c("following")}),(0,t.jsx)("span",{className:r,children:c("unfollow")})]}):(0,t.jsx)("button",{className:o(),onClick:u,disabled:f,children:c("follow")})}},52084:function(l,e,n){"use strict";var t=n(52322);e.Z=l=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-49 141 512 512",width:16,height:16,"aria-hidden":!0,...l,children:(0,t.jsx)("path",{d:"M462.998 325.742c0-75.526-59.998-149.797-148.419-149.797-38.906 0-75.989 13.503-104.409 39.715a153 153 0 0 0-3.17 3.009 155 155 0 0 0-3.17-3.009c-28.42-26.212-65.503-39.715-104.409-39.715-88.421 0-148.419 74.271-148.419 149.797 0 40.557 15.467 78.684 44.143 107.36l-.002-.002L161.01 599.011c12.276 12.28 28.6 19.043 45.964 19.044h.005l.022-.001.022.001h.005c17.364-.001 33.688-6.765 45.964-19.044l165.867-165.912-.002.002c28.674-28.675 44.141-66.803 44.141-107.359M383.5 397.746l-.002.002L217.63 563.66a14.9 14.9 0 0 1-10.607 4.395h-.001l-.022-.001-.022.001h-.001a14.9 14.9 0 0 1-10.607-4.395L30.503 397.749l-.002-.002C11.337 378.583 1.002 353.104 1.002 326c0-54.451 44.665-100.246 100.747-100.246 24.43 0 48.756 9.003 68.184 26.66 15.735 14.301 17.818 30.356 37.068 30.356s21.333-16.055 37.068-30.356c19.427-17.658 43.753-26.66 68.184-26.66C368.335 225.754 413 271.549 413 326c-.001 27.104-10.337 52.583-29.5 71.746"})})},79265:function(){}}]);